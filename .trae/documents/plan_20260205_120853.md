# 编辑器体验升级计划

用户希望进一步提升编辑器的专业性和灵活性：
1.  **侧边栏可伸缩**：不再固定占用空间，可以折叠以获得更大的写作区域。
2.  **代码编辑器体验**：替换简陋的 `textarea`，引入 **Monaco Editor** (VS Code 的核心)，实现 Tab 缩进、括号补全等高级功能。

## 1. 侧边栏优化
- **状态控制**：增加 `isSidebarOpen` 状态。
- **UI 调整**：
    - 在侧边栏顶部增加"折叠"按钮。
    - 在编辑器左上角增加"展开"按钮（当侧边栏折叠时显示）。
    - 使用 CSS Transition 实现平滑的宽度过渡。

## 2. 集成 Monaco Editor
### 技术选型
- 使用 `@guolao/vue-monaco-editor` 封装库，或者直接使用 `monaco-editor` + 简单的 Vue 包装组件。鉴于项目规模，直接引入 `monaco-editor` 并简单封装更加轻量可控。
- **Worker 配置**：Monaco 需要 Web Worker 处理语法高亮。Vite 项目通常使用 `vite-plugin-monaco-editor` 或手动配置 Worker 路径。

### 功能配置
- **语言**：Markdown (`language: 'markdown'`)。
- **特性**：
    - `automaticLayout: true` (自适应容器大小)。
    - `tabSize: 2` (Tab 缩进)。
    - `autoClosingBrackets: 'always'` (自动闭合括号)。
    - `wordWrap: 'on'` (自动换行)。
    - `minimap: { enabled: false }` (隐藏右侧缩略图，保持界面简洁)。
    - `theme`: 适配当前的极简风格（可以自定义一个浅色主题或使用 `vs-light`）。

### 兼容性处理
- 现有的 `editorContent` 双向绑定逻辑需要适配 Monaco 的 API (`getValue` / `setValue` / `onDidChangeModelContent`)。
- **本地缓存逻辑**：确保 `localStorage` 的读写逻辑能正确对接 Monaco 的内容变化事件。

## 3. 执行步骤
1.  **安装依赖**：`npm install monaco-editor`。
2.  **创建 Monaco 组件**：封装一个 `MonacoEditor.vue` 组件，处理初始化和销毁。
3.  **重构 `Editor.vue`**：
    - 替换 `textarea` 为 Monaco 组件。
    - 实现侧边栏折叠逻辑。
    - 确保 `handleSavePost` 和本地缓存逻辑依然工作正常。
4.  **配置 Vite**：处理 Monaco 的 Worker 加载问题。
