# 编辑器缓存与 404 修复计划

用户提出了两个核心问题：
1.  **编辑器数据丢失**：希望有本地缓存，并在打开时提示恢复，且能对比本地与远程版本。
2.  **文章页 404 错误**：刷新页面后出现 Vercel 的 404 页面，这通常是单页应用 (SPA) 的路由配置问题。

## 1. 编辑器本地缓存与冲突解决
### 机制设计
- **自动保存**：监听 `editorContent` 变化，使用 `localStorage` 存储草稿。Key 格式建议为 `draft_${filename}`。
- **恢复逻辑**：
    - 进入编辑器时，同时获取远程内容 (GitHub) 和本地草稿 (localStorage)。
    - 如果两者都存在且不一致，弹出**冲突解决模态框**。
- **冲突解决 UI**：
    - 显示两栏对比：[本地草稿] vs [远程版本]。
    - 提供操作按钮："使用本地草稿"、"使用远程版本"、"手动合并"。

### 技术实现
- 使用 `localStorage` 进行持久化。
- 在 `Editor.vue` 的 `onMounted` 中增加检测逻辑。
- 创建一个新的 `ConflictModal.vue` 组件（或直接在 `Editor.vue` 实现）用于展示对比。

## 2. 修复文章页 404 (刷新报错)
### 问题原因
这是一个经典的 SPA 问题。Vercel 默认寻找对应 URL 的静态文件（如 `/post/xxx.html`），但实际上这些路由都应该由 `index.html` 接管，然后交给 Vue Router 处理。

### 解决方案
- **修改 `vercel.json`**：配置 `rewrites` 规则，将所有非 API 请求重写到 `index.html`。

## 3. 执行步骤
1.  **修复 404**：优先修改 `vercel.json`，确保路由正常工作。
2.  **实现本地缓存**：在 `Editor.vue` 中添加 `watch` 监听并写入 `localStorage`。
3.  **实现冲突检测**：在加载文章时比对本地与远程内容。
4.  **开发对比弹窗**：实现一个简单的两栏对比界面，让用户做出选择。
